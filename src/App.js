import './App.css';
import {useEffect} from 'react'
import MovieCard from './components/MovieCard';
import Typography from '@mui/material/Typography';
import {useSelector, useDispatch} from 'react-redux';
import { Box } from '@mui/material/';

import FilterBox from './components/FilterBox';
import MovieActions, {MovieSelectors} from './redux/MovieRedux'

function App() {
const moveList = {"dates":{"maximum":"2022-05-11","minimum":"2022-03-24"},"page":1,"results":[{"adult":false,"backdrop_path":"/egoyMDLqCxzjnSrWOz50uLlJWmD.jpg","genre_ids":[28,878,35,10751,12],"id":675353,"original_language":"en","original_title":"Sonic the Hedgehog 2","overview":"After settling in Green Hills, Sonic is eager to prove he has what it takes to be a true hero. His test comes when Dr. Robotnik returns, this time with a new partner, Knuckles, in search for an emerald that has the power to destroy civilizations. Sonic teams up with his own sidekick, Tails, and together they embark on a globe-trotting journey to find the emerald before it falls into the wrong hands.","popularity":5170.978,"poster_path":"/6DrHO1jr3qVrViUO6s6kFiAGM7.jpg","release_date":"2022-03-30","title":"Sonic the Hedgehog 2","video":false,"vote_average":7.7,"vote_count":911},{"adult":false,"backdrop_path":"/5P8SmMzSNYikXpxil6BYzJ16611.jpg","genre_ids":[80,9648,53],"id":414906,"original_language":"en","original_title":"The Batman","overview":"In his second year of fighting crime, Batman uncovers corruption in Gotham City that connects to his own family while facing a serial killer known as the Riddler.","popularity":5011.012,"poster_path":"/74xTEgt7R36Fpooo50r9T25onhq.jpg","release_date":"2022-03-01","title":"The Batman","video":false,"vote_average":7.8,"vote_count":4252},{"adult":false,"backdrop_path":"/192vHmAPbk5esL34XMKZ1YLGFjr.jpg","genre_ids":[28,53,80],"id":763285,"original_language":"en","original_title":"Ambulance","overview":"Decorated veteran Will Sharp, desperate for money to cover his wife's medical bills, asks for help from his adoptive brother Danny. A charismatic career criminal, Danny instead offers him a score: the biggest bank heist in Los Angeles history: $32 million.","popularity":3709.034,"poster_path":"/kuxjMVuc3VTD7p42TZpJNsSrM1V.jpg","release_date":"2022-03-16","title":"Ambulance","video":false,"vote_average":6.9,"vote_count":442},{"adult":false,"backdrop_path":"/ndCSoasjIZAMMDIuMxuGnNWu4DU.jpg","genre_ids":[14,28,12],"id":453395,"original_language":"en","original_title":"Doctor Strange in the Multiverse of Madness","overview":"Doctor Strange, with the help of mystical allies both old and new, traverses the mind-bending and dangerous alternate realities of the Multiverse to confront a mysterious new adversary.","popularity":2653.763,"poster_path":"/wRnbWt44nKjsFPrqSmwYki5vZtF.jpg","release_date":"2022-05-04","title":"Doctor Strange in the Multiverse of Madness","video":false,"vote_average":7.6,"vote_count":321},{"adult":false,"backdrop_path":"/i0zbSmiyyylh7H3Qb4jgscz46Pm.jpg","genre_ids":[27],"id":893370,"original_language":"es","original_title":"Virus-32","overview":"A virus is unleashed and a chilling massacre runs through the streets of Montevideo.","popularity":2538.933,"poster_path":"/jPIY9B8IWBz6imj972m5FpDpnop.jpg","release_date":"2022-04-21","title":"Virus:32","video":false,"vote_average":6.8,"vote_count":30},{"adult":false,"backdrop_path":"/2n95p9isIi1LYTscTcGytlI4zYd.jpg","genre_ids":[18,53,80],"id":799876,"original_language":"en","original_title":"The Outfit","overview":"Leonard is an English tailor who used to craft suits on London’s world-famous Savile Row. After a personal tragedy, he’s ended up in Chicago, operating a small tailor shop in a rough part of town where he makes beautiful clothes for the only people around who can afford them: a family of vicious gangsters.","popularity":1951.721,"poster_path":"/lZa5EB6PVJBT5mxhgZS5ftqdAm6.jpg","release_date":"2022-02-25","title":"The Outfit","video":false,"vote_average":7,"vote_count":169},{"adult":false,"backdrop_path":"/fEe5fe82qHzjO4yej0o79etqsWV.jpg","genre_ids":[16,35,28,10751,80],"id":629542,"original_language":"en","original_title":"The Bad Guys","overview":"When the infamous Bad Guys are finally caught after years of countless heists and being the world’s most-wanted villains, Mr. Wolf brokers a deal to save them all from prison.","popularity":1565.001,"poster_path":"/7qop80YfuO0BwJa1uXk1DXUUEwv.jpg","release_date":"2022-03-17","title":"The Bad Guys","video":false,"vote_average":7.7,"vote_count":190},{"adult":false,"backdrop_path":"/x747ZvF0CcYYTTpPRCoUrxA2cYy.jpg","genre_ids":[878,12,28],"id":406759,"original_language":"en","original_title":"Moonfall","overview":"A mysterious force knocks the moon from its orbit around Earth and sends it hurtling on a collision course with life as we know it.","popularity":1437.974,"poster_path":"/odVv1sqVs0KxBXiA8bhIBlPgalx.jpg","release_date":"2022-02-03","title":"Moonfall","video":false,"vote_average":6.5,"vote_count":889},{"adult":false,"backdrop_path":"/xicKILMzPn6XZYCOpWwaxlUzg6S.jpg","genre_ids":[53,28],"id":294793,"original_language":"en","original_title":"All the Old Knives","overview":"When the CIA discovers one of its agents leaked information that cost more than 100 people their lives, veteran operative Henry Pelham is assigned to root out the mole with his former lover and colleague Celia Harrison.","popularity":1230.833,"poster_path":"/g4tMniKxol1TBJrHlAtiDjjlx4Q.jpg","release_date":"2022-04-08","title":"All the Old Knives","video":false,"vote_average":6,"vote_count":198},{"adult":false,"backdrop_path":"/tq3klWQevRK0Or0cGhsw0h3FDWQ.jpg","genre_ids":[12,16,35,10751,14],"id":676705,"original_language":"fr","original_title":"Pil","overview":"Pil, a little vagabond girl, lives on the streets of the medieval city of Roc-en-Brume, along with her three tame weasels. She survives of food stolen from the castle of the sinister Regent Tristain. One day, to escape his guards, Pil disguises herself as a princess. Thus she embarks upon a mad, delirious adventure, together with Crobar, a big clumsy guard who thinks she's a noble, and Rigolin, a young crackpot jester. Pil is going to have to save Roland, rightful heir to the throne under the curse of a spell. This adventure will turn the entire kingdom upside down, and teach Pil that nobility can be found in all of us.","popularity":997.211,"poster_path":"/abPQVYyNfVuGoFUfGVhlNecu0QG.jpg","release_date":"2021-08-11","title":"Pil's Adventures","video":false,"vote_average":6.7,"vote_count":74},{"adult":false,"backdrop_path":"/wdjdHBDwmynWUrJcNzS24uegvK5.jpg","genre_ids":[14,12],"id":338953,"original_language":"en","original_title":"Fantastic Beasts: The Secrets of Dumbledore","overview":"Professor Albus Dumbledore knows the powerful, dark wizard Gellert Grindelwald is moving to seize control of the wizarding world. Unable to stop him alone, he entrusts magizoologist Newt Scamander to lead an intrepid team of wizards and witches. They soon encounter an array of old and new beasts as they clash with Grindelwald's growing legion of followers.","popularity":853.384,"poster_path":"/jrgifaYeUtTnaH7NF5Drkgjg2MB.jpg","release_date":"2022-04-06","title":"Fantastic Beasts: The Secrets of Dumbledore","video":false,"vote_average":6.8,"vote_count":867},{"adult":false,"backdrop_path":"/An1nKjXahrChfEbZ3MAE8fsiut1.jpg","genre_ids":[27],"id":661791,"original_language":"es","original_title":"La abuela","overview":"A Paris model must return to Madrid where her grandmother, who raised her, has had a stroke. But spending just a few days with this relative turns into an unexpected nightmare.","popularity":900.151,"poster_path":"/eIUixNvox4U4foL5Z9KbN9HXYSM.jpg","release_date":"2022-01-28","title":"The Grandmother","video":false,"vote_average":6.1,"vote_count":149},{"adult":false,"backdrop_path":"/6mJrgL7Mi13XjJeGYJFlD6UEVQw.jpg","genre_ids":[16,35,10751,10402],"id":438695,"original_language":"en","original_title":"Sing 2","overview":"Buster and his new cast now have their sights set on debuting a new show at the Crystal Tower Theater in glamorous Redshore City. But with no connections, he and his singers must sneak into the Crystal Entertainment offices, run by the ruthless wolf mogul Jimmy Crystal, where the gang pitches the ridiculous idea of casting the lion rock legend Clay Calloway in their show. Buster must embark on a quest to find the now-isolated Clay and persuade him to return to the stage.","popularity":786.813,"poster_path":"/aWeKITRFbbwY8txG5uCj4rMCfSP.jpg","release_date":"2021-12-01","title":"Sing 2","video":false,"vote_average":8.1,"vote_count":2669},{"adult":false,"backdrop_path":"/tj4lzGgHrfjnjVqAKkLIjFqPSyO.jpg","genre_ids":[28,878,14],"id":526896,"original_language":"en","original_title":"Morbius","overview":"Dangerously ill with a rare blood disorder, and determined to save others suffering his same fate, Dr. Michael Morbius attempts a desperate gamble. What at first appears to be a radical success soon reveals itself to be a remedy potentially worse than the disease.","popularity":719.393,"poster_path":"/h4WLN3cmEjCsH1fNGRfvGV6IPBX.jpg","release_date":"2022-03-30","title":"Morbius","video":false,"vote_average":5.9,"vote_count":573},{"adult":false,"backdrop_path":"/yzH5zvuEzzsHLZnn0jwYoPf0CMT.jpg","genre_ids":[53,28],"id":760926,"original_language":"en","original_title":"Gold","overview":"In the not-too-distant future, two drifters traveling through the desert stumble across the biggest gold nugget ever found and the dream of immense wealth and greed takes hold. They hatch a plan to excavate their bounty, with one man leaving to secure the necessary tools while the other remains with the gold. The man who remains must endure harsh desert elements, ravenous wild dogs, and mysterious intruders, while battling the sinking suspicion that he has been abandoned to his fate.","popularity":660.679,"poster_path":"/ejXBuNLvK4kZ7YcqeKqUWnCxdJq.jpg","release_date":"2022-01-13","title":"Gold","video":false,"vote_average":6.4,"vote_count":226},{"adult":false,"backdrop_path":"/ifUfE79O1raUwbaQRIB7XnFz5ZC.jpg","genre_ids":[27,9648,53],"id":646385,"original_language":"en","original_title":"Scream","overview":"Twenty-five years after a streak of brutal murders shocked the quiet town of Woodsboro, a new killer has donned the Ghostface mask and begins targeting a group of teenagers to resurrect secrets from the town’s deadly past.","popularity":479.086,"poster_path":"/1m3W6cpgwuIyjtg5nSnPx7yFkXW.jpg","release_date":"2022-01-12","title":"Scream","video":false,"vote_average":6.8,"vote_count":1239},{"adult":false,"backdrop_path":"/f2J8DpT5bqV0AiI9VVcfiuqKo5l.jpg","genre_ids":[35,28],"id":656663,"original_language":"en","original_title":"Jackass Forever","overview":"Celebrate the joy of a perfectly executed shot to the groin as Johnny Knoxville, Steve-O and the rest of the gang return alongside some newcomers for one final round of hilarious, wildly absurd and often dangerous displays of stunts and comedy.","popularity":429.645,"poster_path":"/ugIdyvtAzHWOguD91UjHKoAvfum.jpg","release_date":"2022-02-01","title":"Jackass Forever","video":false,"vote_average":6.9,"vote_count":319},{"adult":false,"backdrop_path":"/cqnVuxXe6vA7wfNWubak3x36DKJ.jpg","genre_ids":[28,12,14,18],"id":639933,"original_language":"en","original_title":"The Northman","overview":"Prince Amleth is on the verge of becoming a man when his father is brutally murdered by his uncle, who kidnaps the boy's mother. Two decades later, Amleth is now a Viking who's on a mission to save his mother, kill his uncle and avenge his father.","popularity":365.049,"poster_path":"/zhLKlUaF1SEpO58ppHIAyENkwgw.jpg","release_date":"2022-04-07","title":"The Northman","video":false,"vote_average":7.7,"vote_count":408},{"adult":false,"backdrop_path":"/hw7foD5in5YCs7qY3Pap9pdc1Vc.jpg","genre_ids":[12,35,10749],"id":752623,"original_language":"en","original_title":"The Lost City","overview":"Follows a reclusive romance novelist who was sure nothing could be worse than getting stuck on a book tour with her cover model, until a kidnapping attempt sweeps them both into a cutthroat jungle adventure, proving life can be so much stranger, and more romantic, than any of her paperback fictions.","popularity":338.428,"poster_path":"/neMZH82Stu91d3iqvLdNQfqPPyl.jpg","release_date":"2022-03-24","title":"The Lost City","video":false,"vote_average":7,"vote_count":252},{"adult":false,"backdrop_path":"/wjZfFhrbRn7UqQnJkzT7MxVSXYn.jpg","genre_ids":[35,10749,878],"id":767825,"original_language":"en","original_title":"Moonshot","overview":"In a future where Mars is terraformed and colonized by the best humanity has to offer, two very different college students wind up joining forces and sneak onboard a space shuttle to the red planet in order to be united with their significant others.","popularity":213.556,"poster_path":"/thqgzBPEDYQX0taszVus5nYMtTZ.jpg","release_date":"2022-05-05","title":"Moonshot","video":false,"vote_average":9,"vote_count":5}],"total_pages":66,"total_results":1316};
  const genreList = {"genres":[{"id":28,"name":"Action"},{"id":12,"name":"Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":14,"name":"Fantasy"},{"id":36,"name":"History"},{"id":27,"name":"Horror"},{"id":10402,"name":"Music"},{"id":9648,"name":"Mystery"},{"id":10749,"name":"Romance"},{"id":878,"name":"Science Fiction"},{"id":10770,"name":"TV Movie"},{"id":53,"name":"Thriller"},{"id":10752,"name":"War"},{"id":37,"name":"Western"}]};
  const dispatch = useDispatch();
  const filteredGenres = useSelector(MovieSelectors.selectFilteredGenres);
  const filterRate = useSelector(MovieSelectors.selectFilterRate);
  // dispatch(MovieActions.setGenreList(genreList.genres));
  useEffect( () => {
    dispatch(MovieActions.setGenreList(genreList.genres));
  });
  return (
    <Box>
      <Typography variant='h2' sx={{
        textAlign: 'center',
        backgroundColor: 'rgb(68, 119, 188)',
        color: 'white',
        height: '100px',
        lineHeight: '100px'
      }}>TheMovieDB Test</Typography>
      <Box className="App" sx={{
        padding: '20px 50px 20px 50px'
      }}>
        <FilterBox/>
        <Box sx={{
          display: 'grid',
          gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',
          gridColumnGap: '20px'
        }}>
          {moveList.results.map( ( movie ) => {
            if ( movie.vote_average >= filterRate )
            if ( filteredGenres.length === 0 || movie.genre_ids.some( (genreId) => {
              return filteredGenres.find( (filteredGenre) => {
                return filteredGenre === genreId;
              });
            })) {
              return <MovieCard imgPath={'https://image.tmdb.org/t/p/w500' + movie.backdrop_path} title={movie.title} vote={movie.vote_average} genreIds={movie.genre_ids} overview={movie.overview} key={movie.id}></MovieCard>
            }
          })}
        </Box>
      </Box>
    </Box>
  );
}

export default App;
